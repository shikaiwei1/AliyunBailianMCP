# Changelog

本文档记录了 MCP Server Bailian Image 的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

## [Unreleased]

### 计划添加
- 支持图像编辑功能
- 添加图像风格转换
- 支持批量图像生成
- 添加图像质量优化选项

## [1.0.0] - 2024-01-XX

### 新增
- 完整的图像生成MCP服务器实现
- 支持文生图功能 (`text2imagev2`)
- 基于阿里云百炼通义万相V2版API
- 支持多种预训练模型选择
- 完整的测试套件覆盖
- 详细的API文档和使用示例

### 技术特性
- 基于DashScope SDK同步调用
- 完整的参数验证机制
- 错误处理和异常管理
- 支持多种图像尺寸输出
- 环境变量配置API密钥
- 标准Python项目结构

### 支持的模型
- `wan2.2-t2i-flash` (默认，速度优化)
- `wan2.2-t2i-v1` (基础版本)
- `wan2.2-t2i-v2` (增强版本)
- `wan2.2-t2i-v3` (高质量版本)
- `wan2.2-t2i-v4` (专业版本)
- `wan2.2-t2i-v5` (艺术风格版本)
- `wan2.2-t2i-v6` (最新版本)

### 支持的图像尺寸
- `1024*1024` (默认，正方形)
- `720*1280` (竖屏)
- `1280*720` (横屏)
- `1024*576` (宽屏)
- `576*1024` (高屏)

### 核心功能

#### 文生图 (text2imagev2)
- **正向提示词**: 描述期望生成的图像内容
- **反向提示词**: 描述不希望出现的元素
- **模型选择**: 支持7种不同特性的模型
- **尺寸控制**: 5种常用图像尺寸
- **数量控制**: 单次生成1-4张图像
- **质量保证**: 基于最新的通义万相技术

### 参数说明

#### 必需参数
- `prompt` (string): 正向提示词，描述要生成的图像

#### 可选参数
- `negative_prompt` (string): 反向提示词，描述不希望出现的内容
- `model` (enum): 模型选择，默认 `wan2.2-t2i-flash`
- `size` (enum): 图像尺寸，默认 `1024*1024`
- `n` (integer): 生成数量，范围1-4，默认1

### 文档
- 完整的README.md使用指南
- 详细的API参数说明
- 发布指南和最佳实践
- 测试用例和示例代码
- 模型特性对比说明

### 依赖
- mcp >= 1.0.0
- dashscope >= 1.0.0
- Python >= 3.8

### 使用示例

#### 基础文生图
```json
{
  "tool": "text2imagev2",
  "arguments": {
    "prompt": "一只可爱的小猫在花园里玩耍"
  }
}
```

#### 高级参数配置
```json
{
  "tool": "text2imagev2",
  "arguments": {
    "prompt": "一幅美丽的山水画，中国风格，高质量",
    "negative_prompt": "模糊，低质量，变形",
    "model": "wan2.2-t2i-v6",
    "size": "1280*720",
    "n": 2
  }
}
```

### 性能特点
- **同步调用**: 简化集成复杂度
- **快速响应**: 优化的API调用流程
- **稳定可靠**: 完整的错误处理机制
- **易于使用**: 直观的参数设计

### 已知限制
- 依赖阿里云百炼API服务可用性
- 图像生成时间取决于模型和复杂度
- 单次最多生成4张图像
- 需要有效的DashScope API密钥

### 安全性
- API密钥通过环境变量安全传递
- 不在日志中记录敏感信息
- 输入参数严格验证
- 遵循最佳安全实践

### 测试覆盖
- 服务器初始化测试
- 工具注册验证
- API调用功能测试
- 参数验证测试
- 错误处理测试
- 异步方法测试
- Mock API响应测试

---

## 版本说明

### 版本号格式
- **主版本号**: 不兼容的API更改
- **次版本号**: 向后兼容的功能添加
- **修订版本号**: 向后兼容的错误修复

### 更新类型
- **新增**: 新功能
- **更改**: 现有功能的更改
- **弃用**: 即将移除的功能
- **移除**: 已移除的功能
- **修复**: 错误修复
- **安全**: 安全相关的修复

### 发布周期
- **补丁版本**: 按需发布（错误修复）
- **次要版本**: 每月发布（新功能）
- **主要版本**: 每季度发布（重大更改）

### 路线图

#### v1.1.0 (计划)
- 添加图像编辑功能
- 支持图像风格转换
- 优化生成速度

#### v1.2.0 (计划)
- 支持批量处理
- 添加图像质量控制
- 集成更多模型

#### v2.0.0 (远期)
- 重构API设计
- 支持实时生成
- 添加高级编辑功能

---

**维护团队**: Bailian Team  
**项目地址**: [GitHub Repository]  
**问题反馈**: [GitHub Issues]  
**官方文档**: [阿里云百炼文档](https://help.aliyun.com/zh/model-studio/developer-reference/text-to-image-quick-start/)