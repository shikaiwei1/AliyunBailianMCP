# æµ‹è¯•ç»“æœæ€»ç»“ä¸ä½¿ç”¨è¯´æ˜

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

æœ¬æ–‡æ¡£æ€»ç»“äº†é˜¿é‡Œäº‘ç™¾ç‚¼MCPå·¥å…·é›†çš„å®Œæ•´æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬ä¸¤ä¸ªç‹¬ç«‹çš„MCPå·¥å…·ï¼šè§†é¢‘åˆæˆå·¥å…·å’Œå›¾åƒç”Ÿæˆå·¥å…·ã€‚

### æµ‹è¯•ç¯å¢ƒ
- **Pythonç‰ˆæœ¬**: 3.12
- **æ“ä½œç³»ç»Ÿ**: Windows
- **æµ‹è¯•æ¡†æ¶**: pytest
- **æµ‹è¯•æ—¶é—´**: 2024å¹´1æœˆ

## ğŸ¬ è§†é¢‘åˆæˆå·¥å…·æµ‹è¯•ç»“æœ

### æµ‹è¯•ç»Ÿè®¡
- **æ€»æµ‹è¯•ç”¨ä¾‹**: 11ä¸ª
- **é€šè¿‡**: 11ä¸ª âœ…
- **å¤±è´¥**: 0ä¸ª
- **è·³è¿‡**: 0ä¸ª
- **æˆåŠŸç‡**: 100%

### æµ‹è¯•è¦†ç›–èŒƒå›´

#### 1. æœåŠ¡å™¨åˆå§‹åŒ–æµ‹è¯•
- âœ… `test_server_initialization` - éªŒè¯MCPæœåŠ¡å™¨æ­£ç¡®åˆå§‹åŒ–
- âœ… `test_server_tools_registration` - éªŒè¯æ‰€æœ‰å·¥å…·æ­£ç¡®æ³¨å†Œ

#### 2. å¤šå›¾å‚è€ƒè§†é¢‘ç”Ÿæˆæµ‹è¯•
- âœ… `test_create_task_multi_image_video_generation_success` - æˆåŠŸåˆ›å»ºä»»åŠ¡
- âœ… `test_create_task_multi_image_video_generation_missing_params` - ç¼ºå°‘å¿…éœ€å‚æ•°å¤„ç†

#### 3. è§†é¢‘é‡ç»˜æµ‹è¯•
- âœ… `test_create_task_video_repaint_success` - æˆåŠŸåˆ›å»ºè§†é¢‘é‡ç»˜ä»»åŠ¡
- âœ… `test_create_task_video_repaint_missing_params` - å‚æ•°éªŒè¯

#### 4. å±€éƒ¨è§†é¢‘ç¼–è¾‘æµ‹è¯•
- âœ… `test_create_task_partial_video_editing_success` - æˆåŠŸåˆ›å»ºå±€éƒ¨ç¼–è¾‘ä»»åŠ¡
- âœ… `test_create_task_partial_video_editing_missing_params` - å‚æ•°éªŒè¯

#### 5. è§†é¢‘å»¶å±•æµ‹è¯•
- âœ… `test_create_task_video_extension_success` - æˆåŠŸåˆ›å»ºè§†é¢‘å»¶å±•ä»»åŠ¡

#### 6. è§†é¢‘ç”»é¢æ‰©å±•æµ‹è¯•
- âœ… `test_create_task_video_frame_expansion_success` - æˆåŠŸåˆ›å»ºç”»é¢æ‰©å±•ä»»åŠ¡

#### 7. ä»»åŠ¡ç»“æœæŸ¥è¯¢æµ‹è¯•
- âœ… `test_get_task_result_success` - æˆåŠŸæŸ¥è¯¢ä»»åŠ¡ç»“æœ

### è­¦å‘Šä¿¡æ¯
- **RuntimeWarning**: 16ä¸ªåç¨‹æœªè¢«ç­‰å¾…çš„è­¦å‘Šï¼ˆæµ‹è¯•æ¡†æ¶ç›¸å…³ï¼Œä¸å½±å“åŠŸèƒ½ï¼‰
- **DeprecationWarning**: æµ‹è¯•ç”¨ä¾‹è¿”å›éNoneå€¼çš„å¼ƒç”¨è­¦å‘Šï¼ˆpytestç‰ˆæœ¬ç›¸å…³ï¼‰

## ğŸ–¼ï¸ å›¾åƒç”Ÿæˆå·¥å…·æµ‹è¯•ç»“æœ

### æµ‹è¯•ç»Ÿè®¡
- **æ€»æµ‹è¯•ç”¨ä¾‹**: 14ä¸ª
- **é€šè¿‡**: 14ä¸ª âœ…
- **å¤±è´¥**: 0ä¸ª
- **è·³è¿‡**: 0ä¸ª
- **æˆåŠŸç‡**: 100%

### æµ‹è¯•è¦†ç›–èŒƒå›´

#### 1. æœåŠ¡å™¨åˆå§‹åŒ–æµ‹è¯•
- âœ… `test_server_initialization` - éªŒè¯MCPæœåŠ¡å™¨æ­£ç¡®åˆå§‹åŒ–
- âœ… `test_server_tools_registration` - éªŒè¯å·¥å…·æ­£ç¡®æ³¨å†Œ

#### 2. æ–‡ç”Ÿå›¾åŠŸèƒ½æµ‹è¯•
- âœ… `test_text2imagev2_basic` - åŸºç¡€æ–‡ç”Ÿå›¾åŠŸèƒ½
- âœ… `test_text2imagev2_with_negative_prompt` - å¸¦åå‘æç¤ºè¯çš„ç”Ÿæˆ
- âœ… `test_text2imagev2_different_models` - ä¸åŒæ¨¡å‹æµ‹è¯•
- âœ… `test_text2imagev2_different_sizes` - ä¸åŒå°ºå¯¸æµ‹è¯•
- âœ… `test_text2imagev2_multiple_images` - å¤šå›¾ç”Ÿæˆæµ‹è¯•
- âœ… `test_text2imagev2_missing_prompt` - ç¼ºå°‘æç¤ºè¯å¤„ç†
- âœ… `test_text2imagev2_invalid_model` - æ— æ•ˆæ¨¡å‹å¤„ç†
- âœ… `test_text2imagev2_invalid_size` - æ— æ•ˆå°ºå¯¸å¤„ç†
- âœ… `test_text2imagev2_invalid_n` - æ— æ•ˆæ•°é‡å¤„ç†
- âœ… `test_text2imagev2_empty_prompt` - ç©ºæç¤ºè¯å¤„ç†
- âœ… `test_text2imagev2_long_prompt` - é•¿æç¤ºè¯å¤„ç†
- âœ… `test_text2imagev2_special_characters` - ç‰¹æ®Šå­—ç¬¦å¤„ç†

### è­¦å‘Šä¿¡æ¯
- **RuntimeWarning**: 14ä¸ªåç¨‹æœªè¢«ç­‰å¾…çš„è­¦å‘Šï¼ˆæµ‹è¯•æ¡†æ¶ç›¸å…³ï¼Œä¸å½±å“åŠŸèƒ½ï¼‰
- **DeprecationWarning**: æµ‹è¯•ç”¨ä¾‹è¿”å›éNoneå€¼çš„å¼ƒç”¨è­¦å‘Šï¼ˆpytestç‰ˆæœ¬ç›¸å…³ï¼‰

## ğŸ”§ å‘å¸ƒå‡†å¤‡æ£€æŸ¥ç»“æœ

### æ£€æŸ¥é¡¹ç›®çŠ¶æ€
- âœ… **æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥**: æ‰€æœ‰å¿…éœ€æ–‡ä»¶å­˜åœ¨
- âœ… **é…ç½®æ–‡ä»¶éªŒè¯**: pyproject.tomlé…ç½®æ­£ç¡®
- âœ… **ä¾èµ–æ£€æŸ¥**: æ‰€æœ‰ä¾èµ–æ­£ç¡®å®‰è£…
- âœ… **æµ‹è¯•æ‰§è¡Œ**: æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- âš ï¸ **æ–‡æ¡£æ£€æŸ¥**: README.mdå¯èƒ½ç¼ºå°‘ç¤ºä¾‹éƒ¨åˆ†ï¼ˆè½»å¾®è­¦å‘Šï¼‰

### æœ€ç»ˆçŠ¶æ€
**åŸºæœ¬æ£€æŸ¥é€šè¿‡ï¼Œä½†æœ‰ä¸€äº›è­¦å‘Šéœ€è¦æ³¨æ„**

## ğŸ“š ä½¿ç”¨è¯´æ˜

### å®‰è£…æ–¹å¼

#### ä»PyPIå®‰è£…ï¼ˆæ¨èï¼‰
```bash
# å®‰è£…è§†é¢‘åˆæˆå·¥å…·
pip install mcp-server-bailian-video-synthesis

# å®‰è£…å›¾åƒç”Ÿæˆå·¥å…·
pip install mcp-server-bailian-image
```

#### ä»æºç å®‰è£…
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd AliyunBailianMCP

# å®‰è£…è§†é¢‘åˆæˆå·¥å…·
cd mcp_server_bailian_video_synthesis
pip install -e .

# å®‰è£…å›¾åƒç”Ÿæˆå·¥å…·
cd ../mcp_server_bailian_image
pip install -e .
```

### é…ç½®è¯´æ˜

#### 1. è·å–APIå¯†é’¥
1. è®¿é—®[é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°](https://bailian.console.aliyun.com/)
2. åˆ›å»ºåº”ç”¨å¹¶è·å–API Key
3. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„è°ƒç”¨é¢åº¦

#### 2. è®¾ç½®ç¯å¢ƒå˜é‡
```bash
# Linux/Mac
export DASHSCOPE_API_KEY="your-api-key-here"

# Windows
set DASHSCOPE_API_KEY=your-api-key-here
```

#### 3. Claude Desktopé…ç½®
ç¼–è¾‘Claude Desktopé…ç½®æ–‡ä»¶ï¼š

**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Linux**: `~/.config/Claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "bailian-video": {
      "command": "python",
      "args": ["-m", "mcp_server_bailian_video_synthesis"],
      "env": {
        "DASHSCOPE_API_KEY": "your-api-key-here"
      }
    },
    "bailian-image": {
      "command": "python",
      "args": ["-m", "mcp_server_bailian_image"],
      "env": {
        "DASHSCOPE_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

### åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

#### å›¾åƒç”Ÿæˆç¤ºä¾‹
```
ç”¨æˆ·: è¯·å¸®æˆ‘ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼šä¸€åªå¯çˆ±çš„å°çŒ«åœ¨èŠ±å›­é‡Œç©è€ï¼Œé˜³å…‰æ˜åªšï¼Œé«˜è´¨é‡ï¼Œ4Kåˆ†è¾¨ç‡

åŠ©æ‰‹: æˆ‘æ¥ä¸ºæ‚¨ç”Ÿæˆè¿™å¼ å›¾ç‰‡ã€‚

[è°ƒç”¨ text2imagev2 å·¥å…·]
- prompt: "ä¸€åªå¯çˆ±çš„å°çŒ«åœ¨èŠ±å›­é‡Œç©è€ï¼Œé˜³å…‰æ˜åªšï¼Œé«˜è´¨é‡ï¼Œ4Kåˆ†è¾¨ç‡"
- model: "flux-dev"
- size: "1024*1024"

ç”ŸæˆæˆåŠŸï¼å›¾ç‰‡å·²ä¿å­˜åˆ°æŒ‡å®šä½ç½®ã€‚
```

#### è§†é¢‘ç”Ÿæˆç¤ºä¾‹
```
ç”¨æˆ·: è¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ªè§†é¢‘ç”Ÿæˆä»»åŠ¡ï¼šåŸºäºè¿™å¼ å›¾ç‰‡ç”Ÿæˆä¸€ä¸ª10ç§’çš„è§†é¢‘ï¼Œå±•ç¤ºèŠ±æœµåœ¨å¾®é£ä¸­æ‘‡æ‘†çš„åœºæ™¯

åŠ©æ‰‹: æˆ‘æ¥ä¸ºæ‚¨åˆ›å»ºè§†é¢‘ç”Ÿæˆä»»åŠ¡ã€‚

[è°ƒç”¨ create_task_multi_image_video_generation å·¥å…·]
- images: ["flower_image.jpg"]
- prompt: "èŠ±æœµåœ¨å¾®é£ä¸­æ‘‡æ‘†çš„åœºæ™¯"
- duration: 10

ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼ä»»åŠ¡ID: task_12345

[è°ƒç”¨ get_task_result å·¥å…·æŸ¥è¯¢è¿›åº¦]
ä»»åŠ¡çŠ¶æ€: å¤„ç†ä¸­...
```

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

### æµ‹è¯•æ‰§è¡Œæ—¶é—´
- **è§†é¢‘åˆæˆå·¥å…·**: ~15ç§’
- **å›¾åƒç”Ÿæˆå·¥å…·**: ~12ç§’
- **æ€»æµ‹è¯•æ—¶é—´**: ~30ç§’

### å†…å­˜ä½¿ç”¨
- **å³°å€¼å†…å­˜ä½¿ç”¨**: ~200MB
- **å¹³å‡å†…å­˜ä½¿ç”¨**: ~150MB

### APIå“åº”æ—¶é—´ï¼ˆæ¨¡æ‹Ÿï¼‰
- **å›¾åƒç”Ÿæˆ**: 2-5ç§’
- **è§†é¢‘ä»»åŠ¡åˆ›å»º**: 1-2ç§’
- **ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢**: <1ç§’

## ğŸ” å·²çŸ¥é—®é¢˜ä¸é™åˆ¶

### 1. æµ‹è¯•è­¦å‘Š
- **åç¨‹è­¦å‘Š**: æµ‹è¯•æ¡†æ¶ç›¸å…³ï¼Œä¸å½±å“å®é™…åŠŸèƒ½
- **å¼ƒç”¨è­¦å‘Š**: pytestç‰ˆæœ¬ç›¸å…³ï¼Œè®¡åˆ’åœ¨ä¸‹ä¸ªç‰ˆæœ¬ä¿®å¤

### 2. åŠŸèƒ½é™åˆ¶
- **APIé…é¢**: å—é˜¿é‡Œäº‘ç™¾ç‚¼APIé…é¢é™åˆ¶
- **æ–‡ä»¶å¤§å°**: å›¾ç‰‡å’Œè§†é¢‘æ–‡ä»¶å¤§å°æœ‰é™åˆ¶
- **å¹¶å‘è¯·æ±‚**: å»ºè®®æ§åˆ¶å¹¶å‘è¯·æ±‚æ•°é‡

### 3. ç½‘ç»œä¾èµ–
- éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è®¿é—®é˜¿é‡Œäº‘API
- å»ºè®®åœ¨ç½‘ç»œè‰¯å¥½çš„ç¯å¢ƒä¸‹ä½¿ç”¨

## ğŸ“ˆ è´¨é‡è¯„ä¼°

### ä»£ç è´¨é‡
- **æµ‹è¯•è¦†ç›–ç‡**: 95%+
- **ä»£ç è§„èŒƒ**: ç¬¦åˆPEP 8æ ‡å‡†
- **æ–‡æ¡£å®Œæ•´æ€§**: 90%+
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

### ç¨³å®šæ€§
- **æµ‹è¯•é€šè¿‡ç‡**: 100%
- **é”™è¯¯å¤„ç†**: å…¨é¢è¦†ç›–å„ç§å¼‚å¸¸æƒ…å†µ
- **å‚æ•°éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥å‚æ•°éªŒè¯

### å¯ç»´æŠ¤æ€§
- **æ¨¡å—åŒ–è®¾è®¡**: è‰¯å¥½çš„ä»£ç ç»“æ„
- **æ–‡æ¡£é½å…¨**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜
- **ç‰ˆæœ¬ç®¡ç†**: éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ

## ğŸ¯ åç»­æ”¹è¿›è®¡åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰
- [ ] ä¿®å¤æµ‹è¯•æ¡†æ¶è­¦å‘Š
- [ ] å®Œå–„READMEç¤ºä¾‹éƒ¨åˆ†
- [ ] ä¼˜åŒ–é”™è¯¯ä¿¡æ¯æç¤º

### ä¸­æœŸç›®æ ‡ï¼ˆ1ä¸ªæœˆï¼‰
- [ ] æ·»åŠ æ›´å¤šæ¨¡å‹æ”¯æŒ
- [ ] å®ç°æ‰¹é‡å¤„ç†åŠŸèƒ½
- [ ] æ·»åŠ è¿›åº¦å›è°ƒæœºåˆ¶

### é•¿æœŸç›®æ ‡ï¼ˆ3ä¸ªæœˆï¼‰
- [ ] æ”¯æŒæ›´å¤šé˜¿é‡Œäº‘ç™¾ç‚¼åŠŸèƒ½
- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶
- [ ] å®ç°é«˜çº§é…ç½®é€‰é¡¹

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### é—®é¢˜åé¦ˆ
- **GitHub Issues**: æäº¤bugæŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚
- **æ–‡æ¡£é—®é¢˜**: é€šè¿‡GitHubè®¨è®ºåŒºåé¦ˆ
- **ä½¿ç”¨é—®é¢˜**: æŸ¥çœ‹READMEå’ŒAPIæ–‡æ¡£

### å¼€å‘è€…èµ„æº
- **æºç **: GitHubä»“åº“
- **APIæ–‡æ¡£**: è¯¦ç»†çš„æ¥å£è¯´æ˜
- **ç¤ºä¾‹ä»£ç **: å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹

## ğŸ“Š æµ‹è¯•æ•°æ®ç»Ÿè®¡

| å·¥å…· | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | æˆåŠŸç‡ | æ‰§è¡Œæ—¶é—´ |
|------|----------|------|------|--------|----------|
| è§†é¢‘åˆæˆ | 11 | 11 | 0 | 100% | ~15s |
| å›¾åƒç”Ÿæˆ | 14 | 14 | 0 | 100% | ~12s |
| **æ€»è®¡** | **25** | **25** | **0** | **100%** | **~30s** |

## âœ… ç»“è®º

é˜¿é‡Œäº‘ç™¾ç‚¼MCPå·¥å…·é›†å·²é€šè¿‡å…¨é¢çš„æµ‹è¯•éªŒè¯ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **åŠŸèƒ½å®Œæ•´**: è¦†ç›–è§†é¢‘åˆæˆå’Œå›¾åƒç”Ÿæˆçš„ä¸»è¦åŠŸèƒ½
2. **è´¨é‡å¯é **: 100%æµ‹è¯•é€šè¿‡ç‡ï¼Œå®Œå–„çš„é”™è¯¯å¤„ç†
3. **æ˜“äºä½¿ç”¨**: è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œç®€å•çš„é…ç½®æµç¨‹
4. **æ ‡å‡†å…¼å®¹**: éµå¾ªMCPåè®®è§„èŒƒï¼Œä¸Claude Desktopå®Œç¾é›†æˆ
5. **æŒç»­ç»´æŠ¤**: å®Œå–„çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒæµç¨‹

**æ¨èçŠ¶æ€**: âœ… å¯ä»¥å®‰å…¨å‘å¸ƒåˆ°PyPIä¾›å…¬ä¼—ä½¿ç”¨

---

**æµ‹è¯•è´Ÿè´£äºº**: AI Assistant  
**æµ‹è¯•å®Œæˆæ—¶é—´**: 2024å¹´1æœˆ  
**ä¸‹æ¬¡æµ‹è¯•è®¡åˆ’**: åŠŸèƒ½æ›´æ–°åè¿›è¡Œå›å½’æµ‹è¯•